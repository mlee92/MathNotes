% !TEX TS-program = pdflatex
% !TEX encoding = UTF-8 Unicode

% This is a simple template for a LaTeX document using the "article" class.
% See "book", "report", "letter" for other types of document.

\documentclass[11pt]{article} % use larger type; default would be 10pt

\usepackage[utf8]{inputenc} % set input encoding (not needed with XeLaTeX)


%%% Examples of Article customizations
% These packages are optional, depending whether you want the features they provide.
% See the LaTeX Companion or other references for full information.

%%% PAGE DIMENSIONS
\usepackage{geometry} % to change the page dimensions
\geometry{a4paper} % or letterpaper (US) or a5paper or....
% \geometry{margin=2in} % for example, change the margins to 2 inches all round
% \geometry{landscape} % set up the page for landscape
%   read geometry.pdf for detailed page layout information
\usepackage{sidecap}
\usepackage{graphicx} % support the \includegraphics command and options

% \usepackage[parfill]{parskip} % Activate to begin paragraphs with an empty line rather than an indent

%%% PACKAGES
\usepackage{booktabs} % for much better looking tables
\usepackage{array} % for better arrays (eg matrices) in maths
\usepackage{paralist} % very flexible & customisable lists (eg. enumerate/itemize, etc.)
\usepackage{verbatim} % adds environment for commenting out blocks of text & for better verbatim
\usepackage{subfig} % make it possible to include more than one captioned figure/table in a single float
% These packages are all incorporated in the memoir class to one degree or another...

%%% HEADERS & FOOTERS
\usepackage{fancyhdr} % This should be set AFTER setting up the page geometry
\pagestyle{fancy} % options: empty , plain , fancy
\renewcommand{\headrulewidth}{0pt} % customise the layout...
\lhead{}\chead{}\rhead{}
\lfoot{}\cfoot{\thepage}\rfoot{}

\usepackage{amssymb}

%%% SECTION TITLE APPEARANCE
\usepackage{sectsty}
\allsectionsfont{\sffamily\mdseries\upshape} % (See the fntguide.pdf for font help)
% (This matches ConTeXt defaults)

%%% ToC (table of contents) APPEARANCE
\usepackage[nottoc,notlof,notlot]{tocbibind} % Put the bibliography in the ToC
\usepackage[titles,subfigure]{tocloft} % Alter the style of the Table of Contents
\renewcommand{\cftsecfont}{\rmfamily\mdseries\upshape}
\renewcommand{\cftsecpagefont}{\rmfamily\mdseries\upshape} % No bold!

%%% END Article customizations

%%% Theorem Environment
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}

\newenvironment{proof}[1][Proof]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}]}{\end{trivlist}}
\newenvironment{definition}[1][Definition]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}]}{\end{trivlist}}
\newenvironment{example}[1][Example]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}]}{\end{trivlist}}
\newenvironment{remark}[1][Remark]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}]}{\end{trivlist}}
\newenvironment{assignment}[1][Assignment]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}]}{\end{trivlist}}

\newcommand{\qed}{\nobreak \ifvmode \relax \else
      \ifdim\lastskip<1.5em \hskip-\lastskip
      \hskip1.5em plus0em minus0.5em \fi \nobreak
      \vrule height0.75em width0.5em depth0.25em\fi}

\usepackage{listings}
\usepackage{color}

\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\lstset{frame=tb,
  language=Java,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=none,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3
}



%%% END Theorem Environment

%%% The "real" document content comes below...

\title{ToothGrowth Simulation}
\author{Michael Lee}
\date{August 22, 2015} % Activate to display a given date or no date (if empty) % otherwise the current date is printed 

\begin{document}
\maketitle

\section{Summary}

\begin{lstlisting}
summary(ToothGrowth)
\end{lstlisting}

Overall Summary 

\begin{lstlisting}
		 len        supp         dose      
 Min.   : 4.20   OJ:30   Min.   :0.500  
 1st Qu.:13.07   VC:30   1st Qu.:0.500  
 Median :19.25           Median :1.000  
 Mean   :18.81           Mean   :1.167  
 3rd Qu.:25.27           3rd Qu.:2.000  
 Max.   :33.90           Max.   :2.000  
\end{lstlisting}

\subsection{Summary according to Supplement Type}

\begin{lstlisting}
: OJ
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   8.20   15.52   22.70   20.66   25.72   30.90 
------------------------------------------------------------ 
: VC
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   4.20   11.20   16.50   16.96   23.10   33.90 
\end{lstlisting}

\subsection{Summary according to Supplement type and Dose Amount}

\begin{lstlisting}
by(ToothGrowth$len, INDICES = list(ToothGrowth$supp, ToothGrowth$dose), summary)
\end{lstlisting}

\begin{lstlisting}
: OJ
: 0.5
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   8.20    9.70   12.25   13.23   16.18   21.50 
------------------------------------------------------------ 
: VC
: 0.5
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   4.20    5.95    7.15    7.98   10.90   11.50 
------------------------------------------------------------ 
: OJ
: 1
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  14.50   20.30   23.45   22.70   25.65   27.30 
------------------------------------------------------------ 
: VC
: 1
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  13.60   15.27   16.50   16.77   17.30   22.50 
------------------------------------------------------------ 
: OJ
: 2
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  22.40   24.58   25.95   26.06   27.08   30.90 
------------------------------------------------------------ 
: VC
: 2
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  18.50   23.38   25.95   26.14   28.80   33.90 
\end{lstlisting}

\subsection{Summary according to Dose Amount}

\begin{lstlisting}
by(ToothGrowth$len, INDICES = list(ToothGrowth$dose), summary)
\end{lstlisting}

\begin{lstlisting}
: 0.5
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  4.200   7.225   9.850  10.600  12.250  21.500 
------------------------------------------------------------ 
: 1
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  13.60   16.25   19.25   19.74   23.38   27.30 
------------------------------------------------------------ 
: 2
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  18.50   23.52   25.95   26.10   27.83   33.90 
\end{lstlisting}


\section{Confidence Intervals}

\subsection{Supplement Type}

\begin{lstlisting}
getGossetCI <- function(x, y) {
	nX <- length(x)
	nY <- length(y)
	xBar<-mean(x)
	yBar<-mean(y)
	xVar<-(sd(x))^2
	yVar<-(sd(y))^2
	q<-(((xVar+yVar)/nX)^2)/((((xVar/nX)^2)+((yVar/nY)^2))/(nX - 1))
	t<-qt(0.975, q)
	return (yBar - xBar + c(-1,1)*t*sqrt(xVar/nX + yVar/nY))

}
getGossetCI(ToothGrowth$len[1:30], ToothGrowth$[31:60])
mean(ToothGrowth$len[31:60]) - mean(ToothGrowth$len[1:30])
\end{lstlisting}
We find the confidence interval between the dataset with VitC and OJ and the difference between the two means.
\begin{lstlisting}
\end{lstlisting}
[1] -0.1710156  7.5710156
-3.7
\end{document}
Since the difference of the means is within the confidence interval, we can't reject the null hypothesis. 

\section{Dose Amount}

Here we create three data subsets: 0.5 [a] vs 1.0 [b] , 0.5 vs 2.0 [c], 1.0 vs 2.0 to test the difference between tooth lengths. We ignore the supplement type. 

\begin{lstlisting}
a<-subset(ToothGrowth, dose==0.5)
b<-subset(ToothGrowth, dose==1.0)
c<-subset(ToothGrowth, dose==2.0)
\end{lstlisting}

\begin{lstlisting}
getGossetCI(a, b)
abs(mean(a) - mean(b))
\end{lstlisting}

\begin{lstlisting}
[1]  6.276219 11.983781
[2] 9.13
\end{lstlisting}


\begin{lstlisting}
getGossetCI(a,c)
abs(mean(a) - mean(c))
\end{lstlisting}

\begin{lstlisting}
[1] 12.83383 18.15617
[2] 15.495
\end{lstlisting}
\begin{lstlisting}
getGossetCI(b,c)
abs(mean(b) - mean(c))
\end{lstlisting}

\begin{lstlisting}
[1] 3.733519 8.996481
[2] 6.365
\end{lstlisting}
